{"version":3,"file":"C1ae-pGv.js","sources":["../../../node_modules/nuxt/dist/app/components/nuxt-layout.js"],"sourcesContent":["import { Suspense, computed, defineComponent, h, inject, mergeProps, nextTick, onMounted, provide, shallowReactive, shallowRef, unref } from \"vue\";\nimport { useRoute, useRouter } from \"../composables/router.js\";\nimport { useNuxtApp } from \"../nuxt.js\";\nimport { _wrapInTransition } from \"./utils.js\";\nimport { LayoutMetaSymbol, PageRouteSymbol } from \"./injections.js\";\nimport { useRoute as useVueRouterRoute } from \"#build/pages\";\nimport layouts from \"#build/layouts\";\nimport { appLayoutTransition as defaultLayoutTransition } from \"#build/nuxt.config.mjs\";\nconst LayoutLoader = defineComponent({\n  name: \"LayoutLoader\",\n  inheritAttrs: false,\n  props: {\n    name: String,\n    layoutProps: Object\n  },\n  setup(props, context) {\n    return () => h(layouts[props.name], props.layoutProps, context.slots);\n  }\n});\nconst nuxtLayoutProps = {\n  name: {\n    type: [String, Boolean, Object],\n    default: null\n  },\n  fallback: {\n    type: [String, Object],\n    default: null\n  }\n};\nexport default defineComponent({\n  name: \"NuxtLayout\",\n  inheritAttrs: false,\n  props: nuxtLayoutProps,\n  setup(props, context) {\n    const nuxtApp = useNuxtApp();\n    const injectedRoute = inject(PageRouteSymbol);\n    const shouldUseEagerRoute = !injectedRoute || injectedRoute === useRoute();\n    const route = shouldUseEagerRoute ? useVueRouterRoute() : injectedRoute;\n    const layout = computed(() => {\n      let layout2 = unref(props.name) ?? route?.meta.layout ?? \"default\";\n      if (layout2 && !(layout2 in layouts)) {\n        if (import.meta.dev && layout2 !== \"default\") {\n          console.warn(`Invalid layout \\`${layout2}\\` selected.`);\n        }\n        if (props.fallback) {\n          layout2 = unref(props.fallback);\n        }\n      }\n      return layout2;\n    });\n    const layoutRef = shallowRef();\n    context.expose({ layoutRef });\n    const done = nuxtApp.deferHydration();\n    if (import.meta.client && nuxtApp.isHydrating) {\n      const removeErrorHook = nuxtApp.hooks.hookOnce(\"app:error\", done);\n      useRouter().beforeEach(removeErrorHook);\n    }\n    if (import.meta.dev) {\n      nuxtApp._isNuxtLayoutUsed = true;\n    }\n    let lastLayout;\n    return () => {\n      const hasLayout = layout.value && layout.value in layouts;\n      const transitionProps = route?.meta.layoutTransition ?? defaultLayoutTransition;\n      const previouslyRenderedLayout = lastLayout;\n      lastLayout = layout.value;\n      return _wrapInTransition(hasLayout && transitionProps, {\n        default: () => h(Suspense, { suspensible: true, onResolve: () => {\n          nextTick(done);\n        } }, {\n          default: () => h(\n            LayoutProvider,\n            {\n              layoutProps: mergeProps(context.attrs, { ref: layoutRef }),\n              key: layout.value || void 0,\n              name: layout.value,\n              shouldProvide: !props.name,\n              isRenderingNewLayout: (name) => {\n                return name !== previouslyRenderedLayout && name === layout.value;\n              },\n              hasTransition: !!transitionProps\n            },\n            context.slots\n          )\n        })\n      }).default();\n    };\n  }\n});\nconst LayoutProvider = defineComponent({\n  name: \"NuxtLayoutProvider\",\n  inheritAttrs: false,\n  props: {\n    name: {\n      type: [String, Boolean]\n    },\n    layoutProps: {\n      type: Object\n    },\n    hasTransition: {\n      type: Boolean\n    },\n    shouldProvide: {\n      type: Boolean\n    },\n    isRenderingNewLayout: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props, context) {\n    const name = props.name;\n    if (props.shouldProvide) {\n      provide(LayoutMetaSymbol, {\n        isCurrent: (route) => name === (route.meta.layout ?? \"default\")\n      });\n    }\n    const injectedRoute = inject(PageRouteSymbol);\n    const isNotWithinNuxtPage = injectedRoute && injectedRoute === useRoute();\n    if (isNotWithinNuxtPage) {\n      const vueRouterRoute = useVueRouterRoute();\n      const reactiveChildRoute = {};\n      for (const _key in vueRouterRoute) {\n        const key = _key;\n        Object.defineProperty(reactiveChildRoute, key, {\n          enumerable: true,\n          get: () => {\n            return props.isRenderingNewLayout(props.name) ? vueRouterRoute[key] : injectedRoute[key];\n          }\n        });\n      }\n      provide(PageRouteSymbol, shallowReactive(reactiveChildRoute));\n    }\n    let vnode;\n    if (import.meta.dev && import.meta.client) {\n      onMounted(() => {\n        nextTick(() => {\n          if ([\"#comment\", \"#text\"].includes(vnode?.el?.nodeName)) {\n            if (name) {\n              console.warn(`[nuxt] \\`${name}\\` layout does not have a single root node and will cause errors when navigating between routes.`);\n            } else {\n              console.warn(\"[nuxt] `<NuxtLayout>` needs to be passed a single root node in its default slot.\");\n            }\n          }\n        });\n      });\n    }\n    return () => {\n      if (!name || typeof name === \"string\" && !(name in layouts)) {\n        if (import.meta.dev && import.meta.client && props.hasTransition) {\n          vnode = context.slots.default?.();\n          return vnode;\n        }\n        return context.slots.default?.();\n      }\n      if (import.meta.dev && import.meta.client && props.hasTransition) {\n        vnode = h(\n          LayoutLoader,\n          { key: name, layoutProps: props.layoutProps, name },\n          context.slots\n        );\n        return vnode;\n      }\n      return h(\n        LayoutLoader,\n        { key: name, layoutProps: props.layoutProps, name },\n        context.slots\n      );\n    };\n  }\n});\n"],"names":["LayoutLoader","defineComponent","props","context","h","layouts","nuxtLayoutProps","__nuxt_component_3","nuxtApp","useNuxtApp","injectedRoute","inject","PageRouteSymbol","route","useRoute","useVueRouterRoute","layout","computed","layout2","unref","layoutRef","shallowRef","done","removeErrorHook","useRouter","lastLayout","hasLayout","transitionProps","defaultLayoutTransition","previouslyRenderedLayout","_wrapInTransition","Suspense","nextTick","LayoutProvider","mergeProps","name","provide","LayoutMetaSymbol","vueRouterRoute","reactiveChildRoute","_key","key","shallowReactive"],"mappings":"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","x_google_ignoreList":[0]}